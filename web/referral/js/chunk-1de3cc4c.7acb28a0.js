(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1de3cc4c"],{"0581":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"view-wrapper",style:{height:t.pageMixin_browser.clientHeight}},[t.showRegister?o("DP_Register"):t._e()],1)},n=[],i=o("5530"),a=o("7ded"),c=o("6fa2"),r=o("2f62"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"DP_Register"},[o("DP_Popup",{attrs:{display:!0,"show-close":!1,title:""}},[o("div",{staticClass:"slogan"},[t._v(" 绑定手机号 "),o("br"),t._v("即可参与推荐活动 ")]),o("div",{staticClass:"panda"}),o("div",{staticClass:"login"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),o("div",{staticClass:"time",on:{click:t.countdown}},[t._v(t._s(60!==t.seconds?t.seconds+"s":"获取验证码"))])]),o("template",{slot:"button"},[o("DP_Button",{staticClass:"login_btn",nativeOn:{click:function(e){return t.login(e)}}},[t._v("绑定")]),o("div",{staticClass:"login_tips"},[t._v("绑定手机号将为您自动创建熊猫博士账户")])],1)],2)],1)},d=[],l=(o("b0c0"),o("41d1")),h=o("ff2d"),p=o("b4f6"),f=o("81ae"),g={name:"index",components:{DP_Popup:l["a"],DP_Button:h["a"]},props:{},data:function(){return{seconds:60,secondsLabel:"获取验证码",sendCodeIsOk:!1,code:"",phone:"",phoneIsOk:!1}},watch:{},computed:{},methods:{sendMessage:function(){var t=this;if(!Object(c["a"])(this.phone))return this.$toast("手机号码格式不正确");Object(a["b"])(this.phone).then((function(e){var o=e.data.code;t.sendCodeIsOk=!0,0===o&&t.$toast("验证码已发送")}))},login:function(){var t=this;if(!Object(c["a"])(this.phone))return this.$toast("手机号码格式不正确");if(!this.code)return this.$toast("验证码未填写");if(!this.sendCodeIsOk)return this.$toast("验证码校验错误");var e=this.$store.getters.getUserInfo;e.unionId?Object(a["a"])(this.phone,this.code,e.avatar,e.name,e.unionId).then((function(e){var o=e.headers,s=e.data,n=s.code,i=s.message,a=o["Authorization"]||o["authorization"];if(console.log(i),0===n){Object(p["a"])("signUp"),t.$store.commit("setshowRegister",!1),Object(c["f"])("referral-token",JSON.stringify(a),"cookies"),t.$store.commit("setToken",a),t.$toast("绑定成功");var r=Object(c["c"])("dp-redirect","session");r?(console.log("即将重定向到",r),t.$router.push(r)):(console.log("未获取到重定向信息 重定向到个人中心"),t.dp_go("account-center"))}else{t.$store.commit("setGlobalTips",{show:!1});var u=f["a"][n]||"请重试";t.$toast(u)}})):this.$toast("本地信息获取失败")},countdown:function(){if(60===this.seconds&&(this.phoneIsOk=Object(c["a"])(this.phone))){this.sendMessage();var t=this;function e(){t.seconds-1<=0?t.seconds=60:(t.seconds--,setTimeout(e,1e3))}e()}else Object(c["a"])(this.phone)?60!==this.seconds&&this.$toast("操作频繁 "+this.seconds+"秒后再试"):this.$toast("手机号码格式不正确")}},created:function(){},mounted:function(){}},m=g,b=(o("4965"),o("2877")),v=Object(b["a"])(m,u,d,!1,null,"ea534dba",null),w=v.exports,O=o("f586"),_={metaInfo:function(){return{title:this.$route.meta.title,meta:[{name:"keywords",content:this.$route.meta.title+",熊猫博士"}]}},name:"wechat",components:{DP_Register:w},mixins:[O["a"]],props:{},data:function(){return{}},watch:{},computed:Object(i["a"])({},Object(r["b"])({showRegister:"getShowRegister"})),methods:{getUserInfo:function(t){var e=this;Object(a["d"])(t).then((function(t){var o=t.headers,s=t.data,n=s.code,i=s.data,a=o["Authorization"]||o["authorization"];0===n&&(e.$store.commit("setUserInfo",i),a?(Object(c["f"])("referral-token",JSON.stringify(a),"cookies"),e.$store.commit("setToken",a),Object(p["a"])("login"),e.jump()):e.$store.commit("setshowRegister",!0))}))},jump:function(){var t=Object(c["c"])("dp-redirect","session");t?(console.log("即将重定向到",t),this.$router.push(t)):this.dp_go("account-center")}},created:function(){console.log("进入微信授权页面");var t=Object(c["d"])("code"),e=this.$store.getters.getBrowser.device.isWechat;e?t?this.getUserInfo(t):(console.log("跳转微信"),Object(c["g"])()):console.log("请在微信中打开此页面")},mounted:function(){}},k=_,$=(o("45b4"),Object(b["a"])(k,s,n,!1,null,"253c8ec0",null));e["default"]=$.exports},1548:function(t,e,o){},"45b4":function(t,e,o){"use strict";var s=o("4d15"),n=o.n(s);n.a},4965:function(t,e,o){"use strict";var s=o("1548"),n=o.n(s);n.a},"4d15":function(t,e,o){},aea1:function(t,e,o){"use strict";var s=o("d748"),n=o.n(s);n.a},d748:function(t,e,o){},ff2d:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dp_button"},[o("button",{staticClass:"btn",class:{small:"small"===t.size,medium:"medium"===t.size,large:"large"===t.size},style:{backgroundColor:t.backgroundColor?t.backgroundColor:t.buttonType.backgroundColor,color:t.buttonType.color}},[t._t("default")],2)])},n=[],i={primary:{backgroundColor:" #fd601a",color:"white"},success:{backgroundColor:"rgb(103, 194, 58)",color:"white"},danger:{backgroundColor:"rgb(245, 108, 108)",color:"white"}},a={name:"index",data:function(){return{buttonType:i[this.type]}},props:{backgroundColor:{type:String},type:{type:String,default:"primary"},size:{default:"large",type:String}}},c=a,r=(o("aea1"),o("2877")),u=Object(r["a"])(c,s,n,!1,null,"6634ebc0",null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-1de3cc4c.7acb28a0.js.map