{"version":3,"sources":["webpack:///src/views/Auth/RoleModify.vue","webpack:///./src/views/Auth/RoleModify.vue?0493","webpack:///./src/views/Auth/RoleModify.vue","webpack:///./src/api/permission.js"],"names":["RoleModify","name","components","TableToolsBox","mixins","pageMixin","props","data","rid","this","$route","query","vueRoutes","form","roleName","description","permissionUpdate","menu","api","allPermission","menuPermission","currentMenu","title","treeProps","label","node","meta","children","tree","apiPermission","watch","computed","methods","getRoutes","_this","Object","permission","then","res","_res$data","code","message","arr","map","menu_key","_","cloneDeep","$router","options","routes","find","item","recursion","filter","includes","getRoleInfoFn","_this2","role","_res$data2","role_name","handleMenuCheckChange","checked","indeterminate","console","log","arguments","status","push","handleApiCheckChange","key","handleNodeClick","_this3","_res$data3","forEach","p","saveData","_this4","base","_res$data4","ele_alert","globalMixin_goBack","created","mounted","Auth_RoleModify","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","_v","_s","$store","getters","systemInfo","plain","size","type","nativeOn","click","$event","ref","model","label-width","for","id","disabled","value","callback","$$v","$set","expression","staticStyle","margin-left","width","gutter","default-checked-keys","node-key","show-checkbox","on","check-change","node-click","_e","_l","index","change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__utils_request__","url","method","params","ap_id"],"mappings":"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","file":"static/js/5.7924c89ebf4ce1b1da57.js","sourcesContent":["<template>\n  <div class=\"page_wrapper\">\n\n    <div class=\"main_body animated  fadeIn\">\n      <el-row class=\"head_area  panel_area\">\n        <el-col :span=\"24\">\n          <span class=\"title\">角色修改</span>\n          <span class=\"description\">{{this.$store.getters.systemInfo.title}} 角色修改</span>\n          <el-button @click.native=\"getRoutes\" plain size=\"mini\" type=\"success\">获取</el-button>\n        </el-col>\n      </el-row>\n\n\n      <el-row class=\"panel_area\">\n\n        <el-col :span=\"24\">\n          <h3 class=\"part_title\">角色基础信息修改</h3>\n        </el-col>\n        <el-col :span=\"24\">\n          <el-form :model=\"form\" label-width=\"80px\" ref=\"form\">\n            <label for=\"name\">角色名称:</label>\n            <el-input id=\"name\" v-model=\"form.roleName\" :disabled=\"rid==1\"></el-input>\n            <label for=\"description\" style=\"margin-left: 15px\">角色描述:</label>\n            <el-input id=\"description\" style=\"width: 500px\" v-model=\"form.description\"></el-input>\n\n          </el-form>\n\n        </el-col>\n      </el-row>\n\n\n      <el-row v-if=\"rid !=1\" :gutter=\"20\" class=\"panel_area\">\n        <el-col :span=\"24\">\n          <h3 class=\"part_title\">角色权限修改</h3>\n        </el-col>\n        <el-col :span=\"8\">\n          <h3>菜单级别的权限</h3>\n          <div v-if=\"tree\">\n            <el-tree :data=\"tree\" :default-checked-keys=\"menuPermission\" :props=\"treeProps\"\n                     @check-change=\"handleMenuCheckChange\"\n                     @node-click=\"handleNodeClick\"\n                     node-key=\"name\" show-checkbox></el-tree>\n          </div>\n        </el-col>\n        <el-col :span=\"16\" v-if=\"this.currentMenu.title\">\n          <h3><span class=\"currentMenu\">{{this.currentMenu.title}}</span> 菜单下的 具体权限 </h3>\n          <div class=\"api_permission\">\n            <el-checkbox :key=\"index\" @change=\"handleApiCheckChange(currentMenu.name,p.key,arguments)\"\n                         v-for=\"(p,index)  of apiPermission\" v-model=\"p.checked\">{{p.name}}\n            </el-checkbox>\n          </div>\n\n        </el-col>\n        <el-col :span=\"16\" v-else>\n          <el-alert\n            title=\"点击左侧菜单节点后可分配具体权限\"\n            type=\"info\">\n          </el-alert>\n        </el-col>\n\n      </el-row>\n\n      <el-row v-else  :gutter=\"20\" class=\"panel_area\">\n        <el-col :span=\"24\">\n        <h3 class=\"part_title\">角色权限修改</h3>\n        </el-col>\n        <el-col :span=\"24\" >\n          <el-alert\n            title=\"无法修改超级管理员的权限,超级管理员拥有全部权限！\"\n            type=\"info\">\n          </el-alert>\n        </el-col>\n      </el-row>\n\n\n      <el-row class=\"panel_area form_footer_button\">\n        <el-col :span=\"24\">\n          <el-button @click=\"saveData\" type=\"primary\">保存</el-button>\n          <el-button @click=\"globalMixin_goBack\">返回</el-button>\n        </el-col>\n      </el-row>\n\n\n    </div>\n\n\n  </div>\n</template>\n\n<script>\n    import pageMixin from \"@/mixin/pageMixin\";\n    import TableToolsBox from \"../../components/childComponents/TableToolsBox\";\n    import {getRoleInfoById, modifyRole} from \"../../api/role\";\n    import {getAPIPermissionByMenu, getMenuPermission} from \"../../api/permission\";\n    export default {\n        name: \"RoleModify\",\n        components: {\n            TableToolsBox,\n        },\n        mixins: [pageMixin],\n        props: {},\n        data() {\n            return {\n                rid: this.$route.query.rid,\n                vueRoutes: null,\n                form: {\n                    roleName: \"\",\n                    description: \"\",\n                },\n                // treeCheckBoxIsOk: false,\n                permissionUpdate: {\n                    menu: [],\n                    api: [],\n                },\n                allPermission: [],\n                menuPermission: [],\n                currentMenu: {\n                    title: \"\",\n                    name: \"\"\n                },\n                treeProps: {\n                    label: function (data, node) {\n                        return data.meta.title;\n                    },\n                    children: \"children\"\n                },\n                tree: null,\n                apiPermission: []\n            }\n        },\n        watch: {},\n        computed: {},\n        methods: {\n            getRoutes() {\n                getMenuPermission().then(res => {\n                    const {data, code, message} = res.data;\n                    if (code === 10000) {\n                        const arr = data.map(res => {\n                            return res.menu_key;\n                        });\n                        const recursion = function (routes) {\n                            return routes.filter(item => {\n                                if (item.children) item.children = recursion(item.children);\n                                return arr.includes(item.name);\n                            })\n                        };\n                        this.vueRoutes = _.cloneDeep(this.$router.options.routes.find(item => item.name === 'Frame').children);\n                        this.tree = recursion(this.vueRoutes);\n                    }\n                })\n\n\n                // this.data = changeRoutes(vueRoutes);//改变路由  在路由配置中 加入label 以便tree 组件使用\n\n            },\n\n            getRoleInfoFn() {\n                if (!this.rid) return;\n                getRoleInfoById(this.rid).then(res => {\n                    const {data, code, message} = res.data;\n                    if (code === 10000) {\n                        this.form.roleName = data.role_name;\n                        this.form.description = data.description;\n                        this.allPermission = data.permission;\n                        this.menuPermission = data.permission.map(item => {\n                            return item.menu_key;\n                        });\n                        // setTimeout(() => {\n                        //     this.treeCheckBoxIsOk = true;//防止 复选框 的改变事件自动触发\n                        // }, 1000)\n                    }\n                })\n            },\n\n            handleMenuCheckChange(data, checked, indeterminate) {\n\n                console.log(arguments);\n                const item = this.permissionUpdate.menu.find(item => item.name === data.name);\n                if (item) {\n                    item.status = checked;\n                } else {\n                    this.permissionUpdate.menu.push({name: data.name, status: checked});\n                }\n\n            },\n            handleApiCheckChange(menu, key, status) {\n                status = status[0];\n                console.log(menu, key, status);\n                const item = this.permissionUpdate.api.find(item => item.key === key && item.menu_key === menu);\n                if (item) {\n                    item.status = status;\n                } else {\n                    this.permissionUpdate.api.push({key: key, menu_key: menu, status});\n                }\n\n            },\n            handleNodeClick(data) {\n                this.currentMenu = {\n                    title: data.meta.title,\n                    name: data.name,\n                };\n                const key = data.name;\n                getAPIPermissionByMenu(key).then(res => {\n                    const {code, data, message} = res.data;\n                    if (code === 10000) {\n                        this.apiPermission = data.map((item) => {\n                            return {\n                                key: item.key,\n                                name: item.description,\n                                checked: false,\n                            }\n                        });\n\n                        const menu = this.allPermission.find((item) => {\n                            return item.menu_key === key;\n                        });\n\n                        console.log(menu, key);\n                        if (menu && \"api\" in menu) {\n                            this.apiPermission.forEach((item) => {\n\n                                console.log(item);\n                                if (menu.api.find(p => p.key === item.key)) {\n                                    item.checked = true;\n                                }\n                            })\n\n                        }\n\n                    }\n                })\n\n            },\n\n            saveData() {\n\n                modifyRole(this.rid, {\n                    base: this.form,\n                    permission: this.permissionUpdate\n                }).then(res => {\n                    const {data, code, message} = res.data;\n                    if (code === 10000) {\n                        this.ele_alert(message, \"success\", () => {\n                            this.globalMixin_goBack();\n                        });\n                    }\n                })\n\n            }\n\n        },\n        created() {\n            this.getRoutes();\n            this.getRoleInfoFn();\n        },\n        mounted() {\n        },\n    }\n</script>\n\n<style lang='scss' scoped>\n  @import \"../../assets/styles/base.scss\";\n\n\n  .item_img {\n    img {\n      max-width: 100%;\n    }\n  }\n\n\n  .el-input {\n    width: 300px;\n  }\n\n  h3 {\n    margin-bottom: 15px;\n    margin-left: 5px;\n    font-weight: normal;\n  }\n\n  .page_wrapper {\n\n    .currentMenu {\n      color: $baseColor3;\n    }\n\n    .api_permission {\n      display: flex;\n      /*flex-direction: row-reverse;*/\n      justify-content: center;\n\n      flex-wrap: wrap;\n\n      ul {\n        width: 100%;\n\n        li {\n          text-align: center;\n          color: gray;\n          font-size: 14px;\n\n          &:not(:last-child) {\n            margin-bottom: 15px;\n\n          }\n        }\n\n      }\n\n    }\n\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Auth/RoleModify.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page_wrapper\"},[_c('div',{staticClass:\"main_body animated  fadeIn\"},[_c('el-row',{staticClass:\"head_area  panel_area\"},[_c('el-col',{attrs:{\"span\":24}},[_c('span',{staticClass:\"title\"},[_vm._v(\"角色修改\")]),_vm._v(\" \"),_c('span',{staticClass:\"description\"},[_vm._v(_vm._s(this.$store.getters.systemInfo.title)+\" 角色修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"plain\":\"\",\"size\":\"mini\",\"type\":\"success\"},nativeOn:{\"click\":function($event){return _vm.getRoutes($event)}}},[_vm._v(\"获取\")])],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"panel_area\"},[_c('el-col',{attrs:{\"span\":24}},[_c('h3',{staticClass:\"part_title\"},[_vm._v(\"角色基础信息修改\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"角色名称:\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"id\":\"name\",\"disabled\":_vm.rid==1},model:{value:(_vm.form.roleName),callback:function ($$v) {_vm.$set(_vm.form, \"roleName\", $$v)},expression:\"form.roleName\"}}),_vm._v(\" \"),_c('label',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"for\":\"description\"}},[_vm._v(\"角色描述:\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"500px\"},attrs:{\"id\":\"description\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", $$v)},expression:\"form.description\"}})],1)],1)],1),_vm._v(\" \"),(_vm.rid !=1)?_c('el-row',{staticClass:\"panel_area\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('h3',{staticClass:\"part_title\"},[_vm._v(\"角色权限修改\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('h3',[_vm._v(\"菜单级别的权限\")]),_vm._v(\" \"),(_vm.tree)?_c('div',[_c('el-tree',{attrs:{\"data\":_vm.tree,\"default-checked-keys\":_vm.menuPermission,\"props\":_vm.treeProps,\"node-key\":\"name\",\"show-checkbox\":\"\"},on:{\"check-change\":_vm.handleMenuCheckChange,\"node-click\":_vm.handleNodeClick}})],1):_vm._e()]),_vm._v(\" \"),(this.currentMenu.title)?_c('el-col',{attrs:{\"span\":16}},[_c('h3',[_c('span',{staticClass:\"currentMenu\"},[_vm._v(_vm._s(this.currentMenu.title))]),_vm._v(\" 菜单下的 具体权限 \")]),_vm._v(\" \"),_c('div',{staticClass:\"api_permission\"},_vm._l((_vm.apiPermission),function(p,index){return _c('el-checkbox',{key:index,on:{\"change\":function($event){return _vm.handleApiCheckChange(_vm.currentMenu.name,p.key,arguments)}},model:{value:(p.checked),callback:function ($$v) {_vm.$set(p, \"checked\", $$v)},expression:\"p.checked\"}},[_vm._v(_vm._s(p.name)+\"\\n          \")])}),1)]):_c('el-col',{attrs:{\"span\":16}},[_c('el-alert',{attrs:{\"title\":\"点击左侧菜单节点后可分配具体权限\",\"type\":\"info\"}})],1)],1):_c('el-row',{staticClass:\"panel_area\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":24}},[_c('h3',{staticClass:\"part_title\"},[_vm._v(\"角色权限修改\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-alert',{attrs:{\"title\":\"无法修改超级管理员的权限,超级管理员拥有全部权限！\",\"type\":\"info\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"panel_area form_footer_button\"},[_c('el-col',{attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveData}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.globalMixin_goBack}},[_vm._v(\"返回\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41662a8f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Auth/RoleModify.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41662a8f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RoleModify.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleModify.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RoleModify.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41662a8f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RoleModify.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41662a8f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Auth/RoleModify.vue\n// module id = null\n// module chunks = ","import request from \"../utils/request\";\n\n\nexport function setRoleMenuPermission(rid, name, status) {\n  return request({\n    url: \"/setRoleMenuPermission\",\n    method: \"post\",\n    data: {\n      rid, name, status\n    }\n  })\n\n}\n\nexport function setRoleApiPermission(rid, key, status) {\n  return request({\n    url: \"/setRoleApiPermission\",\n    method: \"post\",\n    data: {\n      rid, key, status\n    }\n  })\n\n}\n\nexport function getMenuPermission() {\n  return request({\n    url: \"/getMenuPermission\",\n    method: \"get\"\n  })\n}\n\nexport function setMenuPermission(data) {\n  return request({\n    url: \"/setMenuPermission\",\n    method: \"post\",\n    data: {data}\n  })\n\n}\n\nexport function getAPIPermissionByMenu(menu) {\n  return request({\n    url: \"/getAPIPermissionByMenu\",\n    method: \"get\",\n    params: {\n      menu\n    }\n  })\n\n}\n\nexport function setAPIPermissionByMenu(data) {\n  return request({\n    url: \"/setAPIPermissionByMenu\",\n    method: \"post\",\n    data: {\n      data\n    }\n  })\n\n}\n\n\nexport function deleteAPIPermissionByMenu(ap_id) {\n  return request({\n    url: \"/deleteAPIPermissionByMenu\",\n    method: \"delete\",\n    params: {\n      ap_id\n    },\n  })\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/permission.js"],"sourceRoot":""}