webpackJsonp([4],{hOiU:function(e,a){},o5rQ:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),s=t.n(r),n=t("exGp"),l=t.n(n),i=t("//Fk"),c=t.n(i),o=t("99Ta"),u=t("vMJZ"),h=t("RAp7"),d=t("/tHx"),p={name:"UserList",components:{TableToolsBox:t("/6my").a},mixins:[h.a,d.a],props:{},data:function(){return{loading:!0,dialogTitle:"",editId:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",description:"",url:"",type:"1",imgurl:""},tableBatchOperation:[{text:"删除",value:"delete"},{text:"封禁",value:"ban"},{text:"取消封禁",value:"cancelBan"}],tableBatchOperate:"",tableData:[],tableSort:{sortBy:"",sort:"desc"},searchParameterSource:{status:[],searchBy:[],gender:[]},searchParameterRes:{status:"",gender:"",searchBy:"",searchValue:"",dateRange:""},uploadUrl:window.API_server.API_ADDRESS+"/single_upload",headers:{Authorization:""},dialog:{title:"",display:!1},changeRole:{uid:"",username:"",rid:""}}},watch:{},computed:{},methods:{tableRowClickFn:function(e,a,t){console.log(e)},tableSortFn:function(e){this.tableSort.sortBy=e.prop,"ascending"===e.order?this.tableSort.sort="asc":this.tableSort.sort="desc",this.getTableDataSource()},tableBatchFn:function(){if(""!==this.tableBatchOperate&&0!==this.tableMixin_multipleSelection.length){var e=this.tableMixin_multipleSelection.map(function(e){return e.uid});switch(this.tableBatchOperate){case"delete":this.deleteFn(e);break;case"ban":this.changeOperatorStatusFn(e,"ban");break;case"cancelBan":this.changeOperatorStatusFn(e,"cancelBan")}}else this.ele_alert("请勾选要处理的数据并选择批量处理的操作类型！","warning")},getSearchParameters:function(){var e=this;return new c.a(function(a,t){Object(o.a)("OperatorManage").then(function(r){var s=r.data,n=s.data,l=s.code;s.message;1e4===l?(e.searchParameterSource.searchBy=n.searchBy||[],e.searchParameterRes.searchBy=e.searchParameterSource.searchBy[0]?e.searchParameterSource.searchBy[0].value:"",e.searchParameterSource.status=n.status||[],e.searchParameterSource.gender=n.gender||[],e.searchParameterSource.role=n.role||[],a(!0)):t()})})},getTableDataSource:function(){var e=this;return this.tableMixin_tableLoading=!0,new c.a(function(a,t){Object(u.a)({searchBy:e.searchParameterRes.searchBy,searchValue:e.searchParameterRes.searchValue,startTime:e.searchParameterRes.dateRange[0],endTime:e.searchParameterRes.dateRange[1],sortBy:e.tableSort.sortBy,sort:e.tableSort.sort,status:e.searchParameterRes.status,role:e.searchParameterRes.role,currentPage:e.tableMixin_currentPage,pageSize:e.tableMixin_pageSize}).then(function(t){var r=t.data,s=r.data,n=r.code;r.message;1e4===n&&(e.tableData=s.data,e.tableMixin_total=s.total,a(!0))}).catch(function(e){t(e)}).finally(function(){e.tableMixin_tableLoading=!1})})},clearSearchParameterRes:function(){for(var e in this.searchParameterRes)this.searchParameterRes.hasOwnProperty(e)&&(this.searchParameterRes[e]="")},editFn:function(e){console.log(e.uid),this.ele_alert("无权编辑!","warning")},roleFn:function(e){console.log(e.uid),this.changeRole.uid=e.uid,this.changeRole.username=e.username,this.dialog.title="修改 "+this.changeRole.username+" 的角色",this.dialog.display=!0},changeOperatorStatusFn:function(e,a){var t=this,r=[];Array.isArray(e)?r=e:(r.push(e.uid),a=!0===a[0]?"cancelBan":"ban");var s="cancelBan"===a?"取消封禁":"封禁";this.ele_confirm("你确定"+s+"这"+r.length+"个用户吗？","warning",function(){t.getTableDataSource()})},deleteFn:function(e){var a=this,t=[];Array.isArray(e)?t=e:t.push(e.uid),this.ele_confirm("你确定删除这"+t.length+"个用户吗？","warning",function(){console.log("删除成功"),a.getTableDataSource()})},refreshFn:function(){this.tableMixin_resetCurrentPage(),this.clearSearchParameterRes(),this.getData().then(function(e){console.log("网络请求成功")}).finally(function(){})},searchFn:function(){this.tableMixin_resetCurrentPage(),this.getTableDataSource()},changeRoleFn:function(){var e=this;changeOperatorRole(this.changeRole.uid,this.changeRole.rid).then(function(a){var t=a.data,r=(t.data,t.code);t.message;1e4===r&&(e.ele_notify("修改角色成功","success"),e.dialog.display=!1,e.getTableDataSource())})},getData:function(){var e=this;return l()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.loading=!0,a.next=3,e.getSearchParameters();case 3:return a.next=5,e.getTableDataSource();case 5:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getData().then(function(e){console.log("网络请求成功")}).catch(function(e){console.log(e)}).finally(function(){})},mounted:function(){}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"page_wrapper"},[t("div",{staticClass:"main_body animated  fadeIn"},[t("el-row",{staticClass:"head_area  panel_area"},[t("el-col",{attrs:{span:24}},[t("span",{staticClass:"title"},[e._v("用户列表")]),e._v(" "),t("span",{staticClass:"description"},[e._v("用户信息列表")])])],1),e._v(" "),t("el-row",{staticClass:"panel_area"},[t("el-col",{attrs:{span:24}},[t("TableToolsBox",{attrs:{"show-add":!1,"show-chart":!1,"show-down-load":!0},on:{download:function(a){return e.downloadFn()},refresh:e.refreshFn,search:e.searchFn}},[t("template",{slot:"search"},[t("el-select",{staticClass:"search_param",staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态"},model:{value:e.searchParameterRes.status,callback:function(a){e.$set(e.searchParameterRes,"status",a)},expression:"searchParameterRes.status"}},e._l(this.searchParameterSource.status,function(e,a){return t("el-option",{key:a,attrs:{label:e.text,value:e.value}})}),1),e._v(" "),t("el-select",{staticClass:"search_param",staticStyle:{width:"150px"},attrs:{placeholder:"请选择性别"},model:{value:e.searchParameterRes.gender,callback:function(a){e.$set(e.searchParameterRes,"gender",a)},expression:"searchParameterRes.gender"}},e._l(this.searchParameterSource.gender,function(e,a){return t("el-option",{key:a,attrs:{label:e.text,value:e.value}})}),1),e._v(" "),t("el-input",{staticClass:"input-with-select search_param",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.searchParameterRes.searchValue,callback:function(a){e.$set(e.searchParameterRes,"searchValue","string"==typeof a?a.trim():a)},expression:"searchParameterRes.searchValue"}},[t("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchParameterRes.searchBy,callback:function(a){e.$set(e.searchParameterRes,"searchBy",a)},expression:"searchParameterRes.searchBy"}},e._l(this.searchParameterSource.searchBy,function(e,a){return t("el-option",{key:a,attrs:{label:e.text,value:e.value}})}),1)],1),e._v(" "),t("span",[e._v("注册时间:")]),e._v(" "),1!=e.searchParameterRes.ai?t("el-date-picker",{staticClass:"search_param",staticStyle:{width:"250px"},attrs:{align:"right","end-placeholder":"结束日期","range-separator":"-","start-placeholder":"开始日期",type:"daterange","unlink-panels":"","value-format":"timestamp"},model:{value:e.searchParameterRes.dateRange,callback:function(a){e.$set(e.searchParameterRes,"dateRange",a)},expression:"searchParameterRes.dateRange"}}):e._e()],1)],2)],1)],1),e._v(" "),t("el-row",{staticClass:"panel_area",attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-card",{staticClass:"box-card padding_none"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableMixin_tableLoading,expression:"tableMixin_tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-style":{cursor:"pointer"},border:"","row-key":"user_id",stripe:""},on:{"row-click":e.tableRowClickFn,"sort-change":e.tableSortFn}},[t("el-table-column",{attrs:{align:"center",label:"#",type:"index",width:"50"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"用户ID",prop:"user_id",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"用户头像",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"35%"},attrs:{src:e.row.avatar,alt:""}})]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"用户昵称","min-width":"150",prop:"username"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"性别",prop:"gender",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("gender")(a.row.gender))+" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"手机号码",prop:"tel",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","column-key":"is_ban",label:"状态",prop:"is_ban",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("status")(a.row.status))+" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"最后登录时间",prop:"last_login_time",sortable:"custom",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"注册时间",prop:"create_time",sortable:"custom",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"text"}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"text"}},[e._v("删除")])]}}])})],1)],1)],1)],1),e._v(" "),t("el-row",{staticClass:"panel_area"},[t("el-pagination",{attrs:{"current-page":e.tableMixin_currentPage,"page-size":e.tableMixin_pageSize,"page-sizes":e.tableMixin_pageSizeArr,total:e.tableMixin_total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.tableMixin_handleCurrentChange,"size-change":e.tableMixin_handleSizeChange}})],1)],1)])},staticRenderFns:[]};var m=t("VU/8")(p,g,!1,function(e){t("hOiU")},"data-v-6fe5a8d2",null);a.default=m.exports},vMJZ:function(e,a,t){"use strict";a.b=function(e){return Object(r.a)({url:"/live_rate",method:"get",params:e})},a.a=function(e){return Object(r.a)({url:"/user",method:"get",params:e})};var r=t("vLgD")}});
//# sourceMappingURL=4.3d3b021691ca5b2d96b1.js.map