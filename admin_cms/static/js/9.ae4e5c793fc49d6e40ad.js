webpackJsonp([9],{ATry:function(e,t){},S7eQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),l=a.n(s),i=a("//Fk"),o=a.n(i),c=a("RAp7"),u=a("/tHx"),h=a("/6my"),p=a("STSY"),d=a("99Ta"),g={name:"Role",components:{TableToolsBox:h.a},mixins:[c.a,u.a],props:{},data:function(){return{loading:!0,dialogTitle:"",editId:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",description:"",url:"",type:"1",imgurl:""},tableBatchOperation:[{text:"删除",value:"delete"}],tableBatchOperate:"",tableData:[],tableSort:{sortBy:"",sort:"desc"},searchParameterSource:{status:[],searchBy:[],gender:[]},searchParameterRes:{status:"",gender:"",searchBy:"",searchValue:"",dateRange:""},uploadUrl:window.API_server.API_ADDRESS+"/single_upload",headers:{Authorization:""}}},watch:{},computed:{},methods:{tableRowClickFn:function(e,t,a){console.log(e)},tableSortFn:function(e){this.tableSort.sortBy=e.prop,"ascending"===e.order?this.tableSort.sort="asc":this.tableSort.sort="desc",this.getTableDataSource()},tableBatchFn:function(){if(""!==this.tableBatchOperate&&0!==this.tableMixin_multipleSelection.length){var e=this.tableMixin_multipleSelection.map(function(e){return e.uid});switch(this.tableBatchOperate){case"delete":this.deleteFn(e)}}else this.ele_alert("请勾选要处理的数据并选择批量处理的操作类型！","warning")},getSearchParameters:function(){var e=this;return new o.a(function(t,a){Object(d.a)("OperatorManage").then(function(r){var n=r.data,s=n.data,l=n.code;n.message;1e4===l?(e.searchParameterSource.searchBy=s.searchBy||[],e.searchParameterRes.searchBy=e.searchParameterSource.searchBy[0]?e.searchParameterSource.searchBy[0].value:"",e.searchParameterSource.status=s.status||[],e.searchParameterSource.gender=s.gender||[],t(!0)):a()})})},getTableDataSource:function(){var e=this;return this.loading=!0,new o.a(function(t,a){Object(p.a)(e.tableMixin_currentPage,e.tableMixin_pageSize,e.tableSort.sortBy,e.tableSort.sort,e.searchParameterRes.status,e.searchParameterRes.searchBy,e.searchParameterRes.searchValue,e.searchParameterRes.dateRange[0],e.searchParameterRes.dateRange[1]).then(function(a){var r=a.data,n=r.data,s=r.code;r.message;1e4===s&&(e.tableData=n.data,e.tableMixin_total=n.total,t(!0))}).catch(function(e){a(e)}).finally(function(){e.loading=!1})})},clearSearchParameterRes:function(){for(var e in this.searchParameterRes)this.searchParameterRes.hasOwnProperty(e)&&(this.searchParameterRes[e]="")},editFn:function(e){this.globalMixin_jump("RoleModify",{rid:e.rid})},deleteFn:function(e){var t=this,a=[];Array.isArray(e)?a=e:a.push(e.uid),this.ele_confirm("你确定删除这"+a.length+"个角色吗？","warning",function(){console.log("删除成功"),t.getTableDataSource()})},refreshFn:function(){this.tableMixin_resetCurrentPage(),this.clearSearchParameterRes(),this.getData().then(function(e){console.log("网络请求成功")}).finally(function(){})},searchFn:function(){this.tableMixin_resetCurrentPage(),this.getTableDataSource()},getData:function(){var e=this;return l()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.getSearchParameters();case 3:return t.next=5,e.getTableDataSource();case 5:case"end":return t.stop()}},t,e)}))()}},created:function(){this.getData().then(function(e){console.log("网络请求成功")}).catch(function(e){console.log(e)}).finally(function(){})},mounted:function(){}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page_wrapper"},[a("div",{staticClass:"main_body animated  fadeIn"},[a("el-row",{staticClass:"head_area  panel_area"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title"},[e._v("角色列表")]),e._v(" "),a("span",{staticClass:"description"},[e._v(e._s(this.$store.getters.systemInfo.title)+" 角色列表")])])],1),e._v(" "),a("el-row",{staticClass:"panel_area"},[a("el-col",{attrs:{span:24}},[a("TableToolsBox",{attrs:{"show-add":!0,"show-chart":!1,"show-down-load":!1},on:{refresh:e.refreshFn,search:e.searchFn}},[a("template",{slot:"search"},[a("el-select",{staticClass:"search_param",staticStyle:{width:"150px"},attrs:{placeholder:"筛选性别"},model:{value:e.searchParameterRes.gender,callback:function(t){e.$set(e.searchParameterRes,"gender",t)},expression:"searchParameterRes.gender"}},e._l(this.searchParameterSource.gender,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1),e._v(" "),a("el-input",{staticClass:"input-with-select search_param",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.searchParameterRes.searchValue,callback:function(t){e.$set(e.searchParameterRes,"searchValue","string"==typeof t?t.trim():t)},expression:"searchParameterRes.searchValue"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchParameterRes.searchBy,callback:function(t){e.$set(e.searchParameterRes,"searchBy",t)},expression:"searchParameterRes.searchBy"}},e._l(this.searchParameterSource.searchBy,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1)],1)],1)],2)],1)],1),e._v(" "),a("el-row",{staticClass:"panel_area",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card padding_none"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-style":{cursor:"pointer"},border:"","row-key":"id",stripe:""},on:{"row-click":e.tableRowClickFn,"selection-change":e.tableMixin_handleSelectionChange,"sort-change":e.tableSortFn}},[a("el-table-column",{attrs:{align:"center",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"ID",prop:"rid",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色名",prop:"role_name",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"角色描述",prop:"description",width:"350"}}),e._v(" "),a("el-table-column",{attrs:{label:"权限",prop:"last_login_ip"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permission,function(t,r){return a("el-tag",{key:r,staticStyle:{"font-size":"14px","margin-right":"5px","margin-bottom":"5px"},attrs:{type:"info"}},[e._v(e._s(t.menu_title)+"\n                  "),t.api?[e._v("\n                    ("),e._l(t.api,function(t,r){return a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}},[e._v(e._s(t.description))])}),e._v(")\n                  ")]:e._e()],2)})}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"create_time",sortable:"custom",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"mini",type:"primary"},on:{click:function(a){return a.stopPropagation(),e.editFn(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(a){return a.stopPropagation(),e.deleteFn(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"panel_area"},[a("el-col",{attrs:{span:12}},[a("span",{staticStyle:{color:"gray","font-size":"14px"}},[e._v("批量操作:")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择批量操作",size:"small"},model:{value:e.tableBatchOperate,callback:function(t){e.tableBatchOperate=t},expression:"tableBatchOperate"}},e._l(e.tableBatchOperation,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.tableBatchFn}},[e._v("确定")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.tableMixin_currentPage,"page-size":e.tableMixin_pageSize,"page-sizes":e.tableMixin_pageSizeArr,total:e.tableMixin_total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.tableMixin_handleCurrentChange,"size-change":e.tableMixin_handleSizeChange}})],1)],1)],1)])},staticRenderFns:[]};var b=a("VU/8")(g,m,!1,function(e){a("ATry")},"data-v-4c9d24ba",null);t.default=b.exports}});
//# sourceMappingURL=9.ae4e5c793fc49d6e40ad.js.map