webpackJsonp([11],{J8iO:function(e,t){},PsMp:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("RAp7"),i=a("/tHx"),n={name:"ChannelManage",components:{TableToolsBox:a("/6my").a},mixins:[s.a,i.a],props:{},data:function(){return{dialogTitle:"",dialogVisible:!1,dialogValue:{name:"",description:""},tableData:[],channelData:[],tableExpandArr:[],tableSort:{sortBy:"",sort:"desc"},searchParameterSource:{status:[],searchBy:[],channel:[]},searchParameterRes:{channel:"",searchBy:"",searchValue:"",dateRange:""}}},watch:{},computed:{},methods:{tableRowClickFn:function(e,t,a){this.$router.push({name:"PlayerInfo",query:{user_id:e.user_id}})},tableSortFn:function(e){this.tableSort.sortBy=e.prop,"ascending"===e.order?this.tableSort.sort="asc":this.tableSort.sort="desc",this.getTableDataSource()},getSearchParameters:function(){var e=this;this.globalMixin_request("/app_channel_search_parameters","get").then(function(t){var a=t.code,s=t.data;t.message;1e4===a&&(e.searchParameterSource.status=s.status||[],e.searchParameterSource.channel=s.channel||[],e.searchParameterSource.searchBy=s.searchBy||[],e.searchParameterRes.searchBy=e.searchParameterSource.searchBy[0].value)})},getChannelDataSource:function(){var e=this;this.globalMixin_request("/app_channel","get",{}).then(function(t){var a=t.code,s=t.data;t.message,t.addition;1e4===a&&(e.channelData=s.map(function(e){return e.edit=!1,e}))})},updateFn:function(e){var t=this;this.channelData[e].edit=!1,this.globalMixin_request("/app_channel/update","put",{id:this.channelData[e].id,description:this.channelData[e].description}).then(function(e){var a=e.code;e.data,e.message,e.addition;1e4===a&&(t.ele_notify("更新成功","success"),t.getChannelDataSource())})},deleteFn:function(e){this.ele_alert("不可删除!","warning")},addFn:function(){this.dialogTitle="新增渠道",this.dialogVisible=!0},saveFn:function(){var e=this;this.globalMixin_request("/app_channel","post",{name:this.dialogValue.name,description:this.dialogValue.description}).then(function(t){var a=t.code;t.data,t.message,t.addition;1e4===a&&(e.dialogValue.name=e.dialogValue.description="",e.ele_notify("添加渠道成功","success"),e.dialogVisible=!1,e.getChannelDataSource())})},clearSearchParameterRes:function(){for(var e in this.searchParameterRes)this.searchParameterRes.hasOwnProperty(e)&&(this.searchParameterRes[e]="");this.searchParameterRes.searchBy=this.searchParameterSource.searchBy[0].value},refresh:function(){this.resetPage(),this.getChannelDataSource()},searchFn:function(){this.resetPage(),this.searchParameterRes.channel?this.getChannelDataSource():this.ele_alert("请选择渠道")},resetPage:function(){}},created:function(){this.getChannelDataSource()},mounted:function(){}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageMixin_showPage,expression:"pageMixin_showPage"}],staticClass:"page_wrapper"},[a("div",{staticClass:"main_body animated  fadeIn"},[a("el-row",{staticClass:"head_area  panel_area"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title"},[e._v("渠道设置")]),e._v(" "),a("span",{staticClass:"description"},[e._v("新增、修改渠道")])])],1),e._v(" "),a("el-row",{staticClass:"panel_area"},[a("el-col",{attrs:{span:24}},[a("TableToolsBox",{attrs:{"show-search":!1,"show-add":!0,"show-chart":!1,"show-down-load":!1},on:{add:e.addFn,refresh:e.refresh,search:e.searchFn}},[a("template",{slot:"search"})],2)],1)],1),e._v(" "),a("el-row",{staticClass:"panel_area",staticStyle:{"flex-wrap":"wrap"},attrs:{gutter:30,type:"flex"}},e._l(e.channelData,function(t,s){return a("el-col",{key:s,staticStyle:{"margin-bottom":"30px"},attrs:{lg:6,md:12,sm:12,span:6,xl:6,xs:24}},[a("el-card",{staticClass:"box-card "},[a("div",{staticClass:"clearfix",staticStyle:{width:"100%"},attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{color:"gray"}},[e._v("渠道名:")]),e._v(" "),a("span",{staticClass:"font-color-blue",staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.name))]),e._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"15px"},attrs:{type:"text"},on:{click:function(t){return e.deleteFn(s)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除\n            ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!item.edit"}],staticStyle:{float:"right",padding:"3px 0","margin-left":"15px"},attrs:{type:"text"},on:{click:function(e){t.edit=!0}}},[a("i",{staticClass:"el-icon-edit"}),e._v("编辑\n            ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"item.edit"}],staticStyle:{float:"right",padding:"3px 0","margin-left":"15px"},attrs:{type:"text"},on:{click:function(e){t.edit=!1}}},[e._v("取消编辑\n            ")])],1),e._v(" "),a("div",{staticClass:"text"},[a("span",{staticStyle:{color:"gray"}},[e._v("渠道描述:")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!item.edit"}],staticClass:"description",staticStyle:{margin:"15px 0"}},[e._v(e._s(t.description))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"item.edit"}]},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"item.description"}],staticStyle:{width:"100%",border:"1px solid #dedede",padding:"5px","box-sizing":"border-box"},attrs:{name:"",rows:"5"},domProps:{value:t.description},on:{input:function(a){a.target.composing||e.$set(t,"description",a.target.value)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.updateFn(s)}}},[e._v("保存")])],1)])])],1)}),1)],1),e._v(" "),a("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog_wrap"},[a("el-form",[a("el-form-item",[e._v("\n          渠道名:\n          "),a("el-input",{attrs:{clearable:"",placeholder:"请输入渠道名"},model:{value:e.dialogValue.name,callback:function(t){e.$set(e.dialogValue,"name","string"==typeof t?t.trim():t)},expression:"dialogValue.name"}}),e._v(" "),a("span",{staticStyle:{color:"red"}},[e._v("注意:渠道名设置后不可修改(渠道名只能输入英文字母和数字)")])],1),e._v(" "),a("el-form-item",[e._v("\n          描述:\n          "),a("el-input",{attrs:{clearable:"",placeholder:"请输入渠道描述",type:"text"},model:{value:e.dialogValue.description,callback:function(t){e.$set(e.dialogValue,"description","string"==typeof t?t.trim():t)},expression:"dialogValue.description"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveFn}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("J8iO")},"data-v-072732db",null);t.default=o.exports}});
//# sourceMappingURL=11.e8834a11a29fcc64f2e6.js.map