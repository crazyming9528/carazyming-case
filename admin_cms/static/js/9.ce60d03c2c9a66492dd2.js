webpackJsonp([9],{o8DV:function(e,t){},q02y:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("RAp7"),s=a("/tHx"),l={name:"WechatJump",components:{TableToolsBox:a("/6my").a},mixins:[r.a,s.a],props:{},data:function(){return{dialogTitle:"",editId:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{name:"",description:"",url:"",type:"1",imgurl:""},tableData:[],tableExpandArr:[],tableSort:{sortBy:"",sort:"desc"},searchParameterSource:{status:[],searchBy:[]},searchParameterRes:{status:"",searchBy:"",searchValue:"",dateRange:""},uploadUrl:window.API_server.API_ADDRESS+"/single_upload",headers:{Authorization:""}}},watch:{},computed:{},methods:{tableRowClickFn:function(e,t,a){-1===this.tableExpandArr.indexOf(e.id)?(this.tableExpandArr=[],this.tableExpandArr.push(e.id)):this.tableExpandArr=[]},tableSortFn:function(e){this.tableSort.sortBy=e.prop,"ascending"===e.order?this.tableSort.sort="asc":this.tableSort.sort="desc",this.getTableDataSource()},getSearchParameters:function(){var e=this;this.globalMixin_request("/get_search_parameters?type=wechat_jump","get").then(function(t){var a=t.code,r=t.data;t.message;1e4===a&&(e.searchParameterSource.status=r.status||[],e.searchParameterSource.searchBy=r.searchBy||[],e.searchParameterRes.searchBy=e.searchParameterSource.searchBy[0].value)})},getTableDataSource:function(){var e=this;this.globalMixin_request("/wechat_jump","get",{searchBy:this.searchParameterRes.searchBy,searchValue:this.searchParameterRes.searchValue,startTime:this.searchParameterRes.dateRange[0],endTime:this.searchParameterRes.dateRange[1],sortBy:this.tableSort.sortBy,sort:this.tableSort.sort,currentPage:this.tableMixin_currentPage,pageSize:this.tableMixin_pageSize}).then(function(t){var a=t.code,r=t.data;t.message,t.addition;1e4===a&&(e.tableData=r.data.map(function(e){return e.final_url="http://wechat.uyqart.com/wechat_web/jump.html?id="+e.id,1==e.type&&(e.type="遮罩提示"),2==e.type&&(e.type="跳出微信"),3==e.type&&(e.type="不做处理"),e.url=decodeURIComponent(e.url),e}),e.tableMixin_total=r.total)})},clearSearchParameterRes:function(){for(var e in this.searchParameterRes)this.searchParameterRes.hasOwnProperty(e)&&(this.searchParameterRes[e]="");this.searchParameterRes.searchBy=this.searchParameterSource.searchBy[0].value},refresh:function(){this.resetPage(),this.clearSearchParameterRes(),this.getSearchParameters(),this.getTableDataSource()},searchFn:function(){this.resetPage(),this.getTableDataSource()},addFn:function(){for(var e in this.form)this.form.hasOwnProperty(e)&&(this.form[e]="");this.form.type="1",this.dialogFormVisible=!0,this.dialogTitle="新建"},editFn:function(e){this.dialogFormVisible=!0,this.dialogTitle="编辑",this.editId=e.id,this.form.name=e.name,this.form.description=e.description,this.form.url=e.url,this.form.imgurl=e.imgurl,"遮罩提示"===e.type&&(this.form.type="1"),"跳出微信"===e.type&&(this.form.type="2"),"不做处理"===e.type&&(this.form.type="3")},saveFn:function(){var e=this;this.dialogFormVisible=!1,"新建"===this.dialogTitle?(this.form.url=encodeURIComponent(this.form.url),this.globalMixin_request("/wechat_jump","post",this.form).then(function(){e.refresh()})):"编辑"===this.dialogTitle&&(this.form.url=encodeURIComponent(this.form.url),this.globalMixin_request("/wechat_jump/update?id="+this.editId,"put",this.form).then(function(){e.refresh()}))},resetPage:function(){this.tableMixin_currentPage=1,this.tableExpandArr=[]},beforeUpload:function(e){"image/png"===e.type||this.$message.warning("只能上传图片哦!")},uploadSuccess:function(e,t,a){console.log(e,t,a),this.form.imgurl=e.data.path}},created:function(){this.headers.Authorization=this.$store.getters.getOperatorInfo.token,this.getSearchParameters(),this.getTableDataSource()},mounted:function(){}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageMixin_showPage,expression:"pageMixin_showPage"}],staticClass:"page_wrapper"},[a("div",{staticClass:"main_body animated  fadeIn"},[a("el-row",{staticClass:"head_area  panel_area"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title"},[e._v("微信跳出配置表(链接转换)")]),e._v(" "),a("span",{staticClass:"description"},[e._v("配置落地页等需要跳出微信的地址,防止微信屏蔽")])])],1),e._v(" "),a("el-row",{staticClass:"panel_area"},[a("el-col",{attrs:{span:24}},[a("TableToolsBox",{attrs:{"show-add":!0,"show-chart":!1,"show-down-load":!1},on:{add:e.addFn,refresh:e.refresh,search:e.searchFn}},[a("template",{slot:"search"},[a("el-input",{staticClass:"input-with-select search_param",staticStyle:{width:"250px"},attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.searchParameterRes.searchValue,callback:function(t){e.$set(e.searchParameterRes,"searchValue","string"==typeof t?t.trim():t)},expression:"searchParameterRes.searchValue"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchParameterRes.searchBy,callback:function(t){e.$set(e.searchParameterRes,"searchBy",t)},expression:"searchParameterRes.searchBy"}},e._l(this.searchParameterSource.searchBy,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1)],1)],1)],2)],1)],1),e._v(" "),a("el-row",{staticClass:"panel_area",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card padding_none"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-style":{cursor:"pointer"},border:"","row-key":"id",stripe:""},on:{"row-click":e.tableRowClickFn,"sort-change":e.tableSortFn}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"ID"}},[a("span",[e._v(e._s(t.row.id))])]),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("span",[e._v(e._s(t.row.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("span",[e._v(e._s(t.row.description))])]),e._v(" "),a("el-form-item",{attrs:{label:"处理方式"}},[a("span",[e._v(e._s(t.row.type))])]),e._v(" "),a("el-form-item",{attrs:{label:"转换链接"}},[a("span",[e._v(e._s(t.row.final_url))])]),e._v(" "),a("el-form-item",{attrs:{label:"最终跳转到的链接"}},[a("span",[e._v(e._s(t.row.url))])]),e._v(" "),a("el-form-item",{attrs:{label:"修改时间"}},[a("span",[e._v(e._s(t.row.update_time))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(t.row.create_time))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"#",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"ID",prop:"id",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"转换链接",prop:"final_url"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"处理方式",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"修改时间",prop:"update_time",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"create_time",sortable:"custom",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.editFn(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1),e._v(" "),a("el-row",{staticClass:"panel_area"},[a("el-pagination",{attrs:{"current-page":e.tableMixin_currentPage,"page-size":e.tableMixin_pageSize,"page-sizes":e.tableMixin_pageSizeArr,total:e.tableMixin_total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.tableMixin_handleCurrentChange,"size-change":e.tableMixin_handleSizeChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"描述"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"要处理的链接"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"处理方式"}},[a("el-select",{attrs:{placeholder:"请选择处理方式"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"遮罩提示",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"跳出微信",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"不做处理",value:"3"}})],1)],1),e._v(" "),1==e.form.type?a("el-form-item",{staticClass:"item_img",attrs:{label:"中间页图片："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"before-upload":e.beforeUpload,headers:e.headers,"on-success":e.uploadSuccess,"show-file-list":!1}},[a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("遮罩页面诱导图片")]),e._v(" "),e.form.imgurl?a("img",{attrs:{src:e.form.imgurl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[a("span",{staticStyle:{color:"gray",padding:"0 12px"}},[e._v("点击上传")])])])],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveFn}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,i,!1,function(e){a("o8DV")},"data-v-4e29a236",null);t.default=o.exports}});
//# sourceMappingURL=9.ce60d03c2c9a66492dd2.js.map